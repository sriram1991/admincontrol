<div class="row justify-content-center">
  <div class="col-md-6">
    <h1 data-cy="registerTitle">{{ pantitle }}</h1>
  </div>
</div>
<div class="row justify-content-center">
  <div class="col-md-6">
    <form name="form" role="form" (ngSubmit)="submitPancard()" [formGroup]="pancardForm" *ngIf="!success">
      <div class="form-group">
        <label class="form-control-label" for="login">Username</label>
        <input
          type="text"
          class="form-control"
          id="login"
          name="login"
          placeholder="Your username"
          formControlName="login"
          data-cy="username"
          #login
        />

        <div *ngIf="pancardForm.get('login')!.invalid && (pancardForm.get('login')!.dirty || pancardForm.get('login')!.touched)">
          <small class="form-text text-danger" *ngIf="pancardForm.get('login')?.errors?.required"> Your username is required. </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('login')?.errors?.minlength">
            Your username is required to be at least 1 character.
          </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('login')?.errors?.maxlength">
            Your username cannot be longer than 50 characters.
          </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('login')?.errors?.pattern">
            Your username can only contain letters and digits.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label class="form-control-label" for="email">Email</label>
        <input type="email" class="form-control" id="email" name="email" placeholder="Your email" formControlName="email" data-cy="email" />

        <div *ngIf="pancardForm.get('email')!.invalid && (pancardForm.get('email')!.dirty || pancardForm.get('email')!.touched)">
          <small class="form-text text-danger" *ngIf="pancardForm.get('email')?.errors?.required"> Your email is required. </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('email')?.errors?.invalid"> Your email is invalid. </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('email')?.errors?.minlength">
            Your email is required to be at least 5 characters.
          </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('email')?.errors?.maxlength">
            Your email cannot be longer than 100 characters.
          </small>
        </div>
      </div>

      <div class="form-group">
        <label class="form-control-label" for="password">New password</label>
        <input
          type="password"
          class="form-control"
          id="password"
          name="password"
          placeholder="New password"
          formControlName="password"
          data-cy="firstPassword"
        />

        <div *ngIf="pancardForm.get('password')!.invalid && (pancardForm.get('password')!.dirty || pancardForm.get('password')!.touched)">
          <small class="form-text text-danger" *ngIf="pancardForm.get('password')?.errors?.required"> Your password is required. </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('password')?.errors?.minlength">
            Your password is required to be at least 4 characters.
          </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('password')?.errors?.maxlength">
            Your password cannot be longer than 50 characters.
          </small>
        </div>

        <password-strength-bar [passwordToCheck]="pancardForm.get('password')!.value"></password-strength-bar>
      </div>

      <div class="form-group">
        <label class="form-control-label" for="confirmPassword">New password confirmation</label>
        <input
          type="password"
          class="form-control"
          id="confirmPassword"
          name="confirmPassword"
          placeholder="Confirm the new password"
          formControlName="confirmPassword"
          data-cy="secondPassword"
        />

        <div
          *ngIf="
            pancardForm.get('confirmPassword')!.invalid &&
            (pancardForm.get('confirmPassword')!.dirty || pancardForm.get('confirmPassword')!.touched)
          "
        >
          <small class="form-text text-danger" *ngIf="pancardForm.get('confirmPassword')?.errors?.required">
            Your confirmation password is required.
          </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('confirmPassword')?.errors?.minlength">
            Your confirmation password is required to be at least 4 characters.
          </small>

          <small class="form-text text-danger" *ngIf="pancardForm.get('confirmPassword')?.errors?.maxlength">
            Your confirmation password cannot be longer than 50 characters.
          </small>
        </div>
      </div>

      <button type="submit" [disabled]="pancardForm.invalid" class="btn btn-primary" data-cy="submit">Register</button>
    </form>

    <div class="mt-3 alert alert-warning">
      <span class="alert-link"><b>Note Before fill form : </b></span> <br />
      <span>
        * Your are shareing your PAN, we belive that you are aware of it!<br />
        * We store your details encripted and safe we never disclose any point of time.</span
      >
    </div>
  </div>
</div>
